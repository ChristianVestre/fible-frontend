{"ast":null,"code":"import _Array$from from \"@babel/runtime-corejs2/core-js/array/from\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/christian/Development/fible-frontend-nextjs/src/components/route-management/selector.tsx\";\nvar __jsx = React.createElement;\nimport { DragDropContext } from 'react-beautiful-dnd';\nimport React from 'react';\nimport Column from './column';\nimport { connect } from 'react-redux';\nimport { updateOrder, updateSelectorManagerState } from '../../redux/actions/uiActions';\n\nvar Selector =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Selector, _React$Component);\n\n  function Selector() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Selector);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Selector)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"onDragEnd\", function (result) {\n      var destination = result.destination,\n          source = result.source,\n          draggableId = result.draggableId;\n\n      if (!destination) {\n        return;\n      }\n\n      if (destination.droppableId == source.droppableId && destination.index == source.index) {\n        return;\n      }\n\n      var columnId = source.droppableId;\n      var column = _this.props.uiState.columns[source.droppableId];\n\n      var newOrder = _Array$from(column.ids);\n\n      newOrder.splice(source.index, 1);\n      newOrder.splice(destination.index, 0, draggableId);\n\n      _this.props.updateOrder({\n        newOrder: newOrder,\n        columnId: columnId\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"selectorFunction\", function () {\n      //fix reordering problem\n      switch (_this.props.type) {\n        case \"ROUTES\":\n          {\n            var columnId = \"column-1\";\n            var column = _this.props.uiState.columns[columnId];\n            var routes = column.ids.map(function (routeId) {\n              return _this.props.uiState.routes[routeId];\n            });\n            return __jsx(Column, {\n              key: columnId,\n              column: column,\n              type: \"ROUTES\",\n              listItems: routes,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 40\n              },\n              __self: this\n            });\n          }\n\n        case \"STOPS\":\n          {\n            var _columnId = \"column-2\";\n            var _column = _this.props.uiState.columns[_columnId];\n\n            var stops = _column.ids.map(function (stopId) {\n              return _this.props.uiState.stops[stopId];\n            });\n\n            return __jsx(Column, {\n              key: _columnId,\n              column: _column,\n              type: \"STOPS\",\n              listItems: stops,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 46\n              },\n              __self: this\n            });\n          }\n\n        case \"POIS\":\n          {\n            var _columnId2 = \"column-3\";\n            var _column2 = _this.props.uiState.columns[_columnId2];\n            var pois = [];\n            _column2.ids.length > 0 ? pois = _column2.ids.map(function (poiId) {\n              return _this.props.uiState.pois[poiId];\n            }) : pois = [];\n            return __jsx(Column, {\n              key: _columnId2,\n              column: _column2,\n              type: \"POIS\",\n              listItems: pois,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 55\n              },\n              __self: this\n            });\n          }\n\n        default:\n          return __jsx(\"p\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 58\n            },\n            __self: this\n          }, \"wrong\");\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(Selector, [{\n    key: \"render\",\n    value: function render() {\n      return __jsx(DragDropContext, {\n        onDragEnd: this.onDragEnd,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, this.selectorFunction());\n    }\n  }]);\n\n  return Selector;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    selectorState: state.selector,\n    uiState: state.ui,\n    updateOrder: state.updateOrder\n  };\n};\n\nexport default connect(mapStateToProps, {\n  updateOrder: updateOrder,\n  updateSelectorManagerState: updateSelectorManagerState\n})(Selector);","map":{"version":3,"sources":["/home/christian/Development/fible-frontend-nextjs/src/components/route-management/selector.tsx"],"names":["DragDropContext","React","Column","connect","updateOrder","updateSelectorManagerState","Selector","result","destination","source","draggableId","droppableId","index","columnId","column","props","uiState","columns","newOrder","ids","splice","type","routes","map","routeId","stops","stopId","pois","length","poiId","onDragEnd","selectorFunction","Component","mapStateToProps","state","selectorState","selector","ui"],"mappings":"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","sourcesContent":["import styled from 'styled-components';\nimport { DragDropContext } from 'react-beautiful-dnd'\nimport React from 'react';\nimport Column from './column';\nimport { connect } from 'react-redux';\nimport { updateOrder, updateSelectorManagerState } from '../../redux/actions/uiActions'\n\n\n\nclass Selector extends React.Component<{ uiState: any,selectorState:any, type: string, updateOrder: Function }> {\n\n    onDragEnd = result => {\n        const { destination, source, draggableId } = result;\n        if (!destination) {\n            return;\n        }\n\n        if (destination.droppableId == source.droppableId &&\n            destination.index == source.index) {\n            return;\n        }\n        const columnId = source.droppableId;\n        const column = this.props.uiState.columns[source.droppableId]\n        const newOrder = Array.from(column.ids);\n\n        newOrder.splice(source.index, 1);\n        newOrder.splice(destination.index, 0, draggableId);\n\n        this.props.updateOrder({ newOrder, columnId })\n    }\n\n\n    selectorFunction = () => {\n        //fix reordering problem\n        switch (this.props.type) {\n            case (\"ROUTES\"): {\n                const columnId = \"column-1\";\n                const column = this.props.uiState.columns[columnId];\n                const routes = column.ids.map((routeId) => this.props.uiState.routes[routeId])\n                return <Column key={columnId} column={column} type=\"ROUTES\" listItems={routes} />;\n            }\n            case (\"STOPS\"):{\n                const columnId = \"column-2\";\n                const column = this.props.uiState.columns[columnId];\n                const stops = column.ids.map((stopId) => this.props.uiState.stops[stopId])\n                return <Column key={columnId} column={column} type=\"STOPS\" listItems={stops} />;\n            }\n            case (\"POIS\"): {\n                const columnId = \"column-3\";\n                const column = this.props.uiState.columns[columnId];\n                let pois = []\n                column.ids.length>0 ?\n                pois = column.ids.map((poiId) => this.props.uiState.pois[poiId]) :\n                pois = [];\n                return <Column key={columnId} column={column} type=\"POIS\" listItems={pois} />;\n            }\n            default:\n                return <p>wrong</p>\n        }\n    }\n    render() {\n        return <DragDropContext onDragEnd={this.onDragEnd}>\n            {this.selectorFunction()}\n        </DragDropContext>\n    }\n}\n\n\nconst mapStateToProps = state => {\n    return { selectorState: state.selector, uiState:state.ui, updateOrder: state.updateOrder };\n};\n\nexport default connect(mapStateToProps, { updateOrder, updateSelectorManagerState })(Selector);\n\n"]},"metadata":{},"sourceType":"module"}